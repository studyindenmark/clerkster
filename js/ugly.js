function MainController($scope){$scope.$on("$routeChangeSuccess",function(){window.scrollTo(0,0)})}function PostsController($scope,$routeParams,api){$scope.posts=[],$scope.loading=!0,$scope.empty=!1,$scope.pageId=$routeParams.page_id,api.getPosts($routeParams.page_id).success(function(data){$scope.posts=data.data,$scope.loading=!1,$scope.empty=0===$scope.posts.length})}function ReportsController($scope,$routeParams){$scope.pageId=$routeParams.page_id}function WelcomeController($scope,$routeParams,api){$scope.pages=[],$scope.loading=!0,api.getPages().success(function(data){$scope.pages=data,$scope.loading=!1})}function MainNav($location,api){return{restrict:"E",replace:!0,scope:{},templateUrl:"/html/directives/mainNav.html",link:function(scope){scope.isCurrentPage=function(id){var split=$location.path().split("/");return id===split[1]},api.getUser().success(function(data){scope.user=data})}}}function PageNav($location){return{restrict:"E",replace:!0,scope:{pageId:"="},templateUrl:"/html/directives/pageNav.html",link:function(scope){scope.isCurrentTab=function(tabName){var split=$location.path().split("/");return tabName===split[3]}}}}function ApiService($http){return{getPosts:function(id){return $http.get("/api/pages/"+id+"/feed")},getPages:function(){return $http.get("/api/pages")},getPage:function(id){return $http.get("/api/pages/"+id)},getUser:function(){return $http.get("/api/user")},getReports:function(){return $http.get("/api/reports")},getReport:function(reportId){return $http.get("/api/reports/"+reportId)}}}angular.module("clerkster",["ngAnimate","ngSanitize","ngRoute","angular-loading-bar"]).directive("mainNav",MainNav).directive("pageNav",PageNav).factory("api",ApiService).config(["$routeProvider","$locationProvider",function($routeProvider,$locationProvider){$locationProvider.html5Mode(!0),$routeProvider.when("/pages",{templateUrl:"/html/partials/welcome.html",controller:WelcomeController}).when("/pages/:page_id/posts",{templateUrl:"/html/partials/posts.html",controller:PostsController}).when("/pages/:page_id/reports",{templateUrl:"/html/partials/reports.html",controller:ReportsController}).when("/pages/:page_id/reports",{templateUrl:"/html/partials/reports.html",controller:ReportsController}).otherwise({redirectTo:"/pages"})}]);